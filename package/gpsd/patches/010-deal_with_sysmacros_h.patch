--- a/serial.c
+++ b/serial.c
@@ -13,6 +13,9 @@
 #include <errno.h>
 #ifndef S_SPLINT_S
 #include <unistd.h>
+
+#include <sys/sysmacros.h>	/* defines major() */
+
 #include <sys/socket.h>
 #endif /* S_SPLINT_S */
 
